[pytest]
# Configuration pytest pour render_signal_server

# Patterns de découverte des tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Chemins de découverte
testpaths = tests test_app_render.py

# Options par défaut
addopts = 
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --cov=.
    --cov-report=html
    --cov-report=term-missing
    --cov-config=.coveragerc
    --ignore=.venv
    --ignore=deployment
    --ignore=static
    --ignore=docs

# Markers personnalisés
markers =
    unit: Tests unitaires isolés
    integration: Tests d'intégration (plusieurs modules)
    e2e: Tests end-to-end (flux complet)
    slow: Tests lents (> 1 seconde)
    redis: Tests nécessitant Redis
    imap: Tests nécessitant connexion IMAP
    
# Timeout par défaut (évite les tests bloqués)
timeout = 30

# Désactiver les warnings durant les tests
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
